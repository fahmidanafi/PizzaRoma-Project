(function ($) {
  "use strict";

  // Change the values of your latitude and longitude (Map data attributes override these values)
  var Lat = 23.78551490877337;
  var Lng = 90.41869964418026;

  if ($(".ct-contact-map").length) {
    var i = 0;
    $(".ct-contact-map").each(function () {
      Lat = $(this).data("lat") != undefined ? $(this).data("lat") : Lat;
      Lng = $(this).data("lng") != undefined ? $(this).data("lng") : Lng;

      L.HtmlIcon = L.Icon.extend({
        initialize: function (options) {
          L.Util.setOptions(this, options);
        },

        createIcon: function () {
          var div = document.createElement("div");
          div.innerHTML = this.options.html;
          if (div.classList) div.classList.add("leaflet-marker-icon");
          else div.className += " " + "leaflet-marker-icon";
          return div;
        },
      });

      var tiles = L.tileLayer(
          "https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",
          {
            attribution:
              'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: "mapbox/streets-v11",
            tileSize: 512,
            zoomOffset: -1,
            accessToken:
              "pk.eyJ1IjoibWlyc2F6emF0aG9zc2FpbiIsImEiOiJja3J6Y3dhaHYwNWtvMnBxbXQ1MzNhaWNxIn0.HxnGOtDMHLCGjtSXWZInig",
          }
        ),
        latlng = L.latLng(Lat, Lng);

      var i = L.map($(this).attr("id"), {
        center: new L.LatLng(23.81, 90.4187),
        zoom: 12,
        scrollWheelZoom: false,
        layers: [tiles],
      });
      var LeafIcon = L.Icon.extend({
        options: {
          iconSize: [38, 95],
          shadowSize: [50, 64],
          iconAnchor: [22, 94],
          shadowAnchor: [4, 62],
          popupAnchor: [-3, -76],
        },
      });
      var greenIcon = new LeafIcon({
        iconUrl: "http://leafletjs.com/examples/custom-icons/leaf-red.png",
        shadowUrl: "http://leafletjs.com/examples/custom-icons/leaf-shadow.png",
      });

      /*
      var markerHTML = new L.HtmlIcon({
        html: "<img class='leaflet-marker-icon leaflet-zoom-animated leaflet-interactive' src='/static/images/misc/marker.png' alt='markericon' />",
      });*/

      L.marker([Lat, Lng], { icon: greenIcon }).addTo(i);

      var polygon_gulshan = L.polygon(
        [
          [23.78128094490377, 90.39872694866642],
          [23.790662382984628, 90.40025004524648],
          [23.790913525578233, 90.40035693546669],
          [23.79080714763249, 90.40022739315317],
          [23.791006711666835, 90.40009705455886],
          [23.791229130867375, 90.40017970012413],
          [23.79115281811559, 90.40007899155752],
          [23.79131211614058, 90.4001928597121],
          [23.791552174904236, 90.40014164628373],
          [23.791781955976386, 90.40028061823831],
          [23.792000999237008, 90.40037080751644],
          [23.792272501925773, 90.40045881749974],
          [23.79248510194037, 90.40046099679456],
          [23.79278574783184, 90.40034096794115],
          [23.793106026975583, 90.40047843115316],
          [23.793523247664737, 90.40062058823095],
          [23.793918378964737, 90.40059510724531],
          [23.794234973983976, 90.40063399927602],
          [23.794534388718855, 90.40058303730474],
          [23.79491233748108, 90.40073055880056],
          [23.795205615146173, 90.40070574836717],
          [23.795479258563123, 90.40071312444196],
          [23.795716702047592, 90.40092602478252],
          [23.795757809790263, 90.40075268702493],
          [23.795955065419232, 90.40093155683861],
          [23.796113053770807, 90.40093876527534],
          [23.79650756365065, 90.40078152077184],
          [23.796637635074745, 90.40117446439253],
          [23.796924773417867, 90.40130991594778],
          [23.79757758130664, 90.40123749630436],
          [23.804056399058485, 90.40258932964787],
          [23.80554844463913, 90.40705252544865],
          [23.80507727420228, 90.41074324505314],
          [23.805705501071554, 90.41340399639591],
          [23.80813985148608, 90.4141764725922],
          [23.809082168427498, 90.41151572124943],
          [23.812458747978432, 90.41031409161076],
          [23.81434331233476, 90.40936995403752],
          [23.816856022253315, 90.41306067364201],
          [23.816463414534674, 90.41537810223087],
          [23.814107743286304, 90.41537810223087],
          [23.812154466793384, 90.41592527286991],
          [23.811675958648546, 90.41604060785755],
          [23.81143179612079, 90.41602853791699],
          [23.81125634236256, 90.41426230328068],
          [23.810921384529326, 90.41408393638119],
          [23.81066556450327, 90.4137533541201],
          [23.810085826607637, 90.41389484064564],
          [23.809677247869065, 90.41363868968472],
          [23.80944351080542, 90.41358571605667],
          [23.809078794257985, 90.41369065748438],
          [23.80884168194132, 90.41395653145298],
          [23.80819015764143, 90.41486445920452],
          [23.807430655319905, 90.41553635256275],
          [23.807024522207307, 90.41574154155239],
          [23.80737605441643, 90.41655760364517],
          [23.807600899562587, 90.41751816974863],
          [23.808218378159044, 90.41846800701603],
          [23.80909443813422, 90.41976083176121],
          [23.809754546647902, 90.42116094486698],
          [23.80515825674274, 90.42223114626393],
          [23.80362939601733, 90.42492140190586],
          [23.80269194763522, 90.42442251102909],
          [23.7982132068887, 90.42491335527882],
          [23.797945704609585, 90.42590845482334],
          [23.79497614690387, 90.42686868565067],
          [23.794171164197227, 90.42175103085026],
          [23.79416134730418, 90.42175103085026],
          [23.793788304818474, 90.42166520016178],
          [23.79370976942189, 90.4216866578339],
          [23.790784292085544, 90.422244557309],
          [23.786543214723334, 90.42095709698185],
          [23.78065259994461, 90.41906882183537],
          [23.778217734548043, 90.41889716045841],
          [23.77374060500037, 90.41752386944279],
          [23.77328895618118, 90.41621495144352],
          [23.771755271499323, 90.41332788871512],
          [23.769632445330764, 90.41091289477333],
          [23.770747788686062, 90.40155533807263],
          [23.771407478329497, 90.40133673803791],
          [23.771183491058235, 90.40373597400173],
          [23.770959503401283, 90.40583480255589],
          [23.77335400352627, 90.40660996096119],
          [23.773264410004774, 90.40993858234867],
          [23.77439843851836, 90.41132260220036],
          [23.775763186996322, 90.41220236675724],
          [23.77809991732408, 90.41100073711857],
          [23.780161703332578, 90.41048575298771],
        ],
        {
          color: "#fc743a",
          opacity: 0.6,
          weight: 2,
          fillColor: "#fc743a",
          fillOpacity: 0.1,
        }
      ).addTo(i);

      var polygon_basundhara = L.polygon(
        [
          [23.817162824170524, 90.4214033108673],
          [23.811744745585308, 90.42148914155578],
          [23.80825035757499, 90.4296859723053],
          [23.809546040503832, 90.4421314221344],
          [23.812844084163817, 90.4523452740631],
          [23.830628518084453, 90.45080032167053],
          [23.82644574717472, 90.42990054902648],
          [23.821145834397786, 90.4274543744049],
        ],
        {
          color: "#3eb09b",
          opacity: 0.6,
          weight: 2,
          fillColor: "#3eb09b",
          fillOpacity: 0.1,
        }
      ).addTo(i);

      var popup_01 = L.popup({ keepInView: true }).setContent(
        "<b>Pizza Roma Gulshan</b><br><span>Minimum Order: 500 Tk</span><br><span>Delivery Fee: Free</span>"
      );

      var popup_02 = L.popup({ keepInView: true }).setContent(
        "<b>Basundhara Residential Area</b><br><span>Minimum Order: 500 Tk</span><br><span>Delivery Fee: 100 Tk</span>"
      );

      polygon_gulshan.bindPopup(popup_01);
      polygon_basundhara.bindPopup(popup_02);

      i++;
    });
  }
})(jQuery);
